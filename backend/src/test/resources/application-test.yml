# Test Configuration for Integration Tests
# Uses Mac Studio PostgreSQL (192.168.1.10) with separate test schema
spring:
  datasource:
    url: jdbc:postgresql://192.168.1.10:5432/northstar_funding
    username: northstar_user
    password: northstar_password
    driver-class-name: org.postgresql.Driver
    # Set schema for Spring Data JDBC
    hikari:
      schema: test_schema
    
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    # Skip validation for tests to avoid checksum mismatches
    validate-on-migrate: false
    # Clean database before tests for consistent state  
    clean-disabled: false
    # Use a separate schema for tests
    schemas: test_schema
    # Create schema if it doesn't exist
    create-schemas: true
    # Set default schema for connections
    default-schema: test_schema
    
  data:
    jdbc:
      repositories:
        enabled: true
        
# Enable SQL logging for debugging
logging:
  level:
    org.springframework.jdbc: DEBUG
    org.flywaydb: DEBUG
    # Show parameter binding
    org.springframework.jdbc.core.JdbcTemplate: DEBUG
    org.springframework.jdbc.core.StatementCreatorUtils: TRACE
